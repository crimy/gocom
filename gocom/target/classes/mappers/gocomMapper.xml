<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="gocomMapper">
	<select id="login_check" resultType="String">
		select name
		from member
		where userid=#{userid} and password=#{password}
	</select>
	
	<select id="id_valid_check" resultType="int">
		select COUNT(*)
		from member
		where userid=#{userid}
	</select>
	
	<select id="viewmember" resultType="com.gocom.DTO.MemberDTO">
		select 
			userid,
			name
		from member
		where userid=#{userid} AND password=#{password}
	</select>
	
	<select id="name_valid_check" resultType="int">
		select COUNT(*)
		from member
		where name=#{username}
	</select>
	
	<insert id="register_member">
		insert into member(
			userid,
			password,
			name
		) values (
			#{userid},
			#{password},
			#{name}
		)	
	</insert>
	
	<insert id="write" useGeneratedKeys="true" keyProperty="con_no" parameterType="com.gocom.DTO.BoardDTO">
		insert into board(
			title,
			name
		) values (
			#{title},
			#{name}
		)
		
	</insert>
	
	<insert id="upload" parameterType="com.gocom.DTO.ImageDTO">
	insert into image(
		con_no,
		fsn
	) values (
		#{con_no},
		#{fsn}
	)

	</insert>
	
	<select id="list" resultType="com.gocom.DTO.BoardDTO">
		select 
			* 
		from board
		order by
			con_no
		desc;
		
	</select>
	
	<select id="boardView" resultType="com.gocom.DTO.BoardDTO">
		select 
			* 
		from board
		where 
			con_no=#{con_no}
	</select>
	
	<update id="boardView2">
		update
			board
		set
			view_cnt = view_cnt + 1
		where
			con_no=#{con_no}
	</update>
	
	<select id="imageView" resultType="com.gocom.DTO.ImageDTO">
		select
			*
		from image
		where
			con_no=#{con_no}
	</select>
	
	<insert id="recBoard">
		insert into	reclist (
			userid,
			con_no
		) values (
			#{userid},
			#{con_no}
		)
	</insert>
	
	<update id="recommend">
		update 
			board
		set
			rec_cnt = rec_cnt + 1
		where
			con_no=#{con_no}
	</update>
	
	<insert id="warnBoard">
		insert into	warnlist (
			userid,
			con_no
		) values (
			#{userid},
			#{con_no}
		)
	</insert>
	
	<update id="warn">
		update 
			board
		set
			warn_cnt = warn_cnt + 1
		where
			con_no=#{con_no}
	</update>
	
</mapper>